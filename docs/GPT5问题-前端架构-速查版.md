# GPT-5前端架构问题 - 速查版

## 🚀 快速复制粘贴（6个核心问题）

---

### 📋 问题1：整体架构设计

```
我们的AI服装处理SaaS产品前端使用Next.js 14 (App Router) + TypeScript + Ant Design 5开发。

核心业务模块：
1. 用户模块（登录/注册/个人中心）
2. 会员套餐（购买/续费/配额管理）
3. AI功能工作台（20+个AI功能：抠图/换脸/换装/视频处理等）
4. 素材库（用户作品管理）
5. 分销代理（邀请/佣金/提现）
6. 管理后台（用户管理/功能配置/流水线编排/数据统计）

技术栈限制：
- 必须使用Next.js 14 App Router
- 必须使用Ant Design 5
- 必须使用TypeScript严格模式
- 状态管理：Zustand
- API请求：axios

当前痛点：
- 代码重复严重（功能配置、布局、表单到处复制粘贴）
- 组件职责不清（页面组件包含太多业务逻辑）
- 状态管理混乱（全局状态和组件状态划分不合理）
- 路由权限控制散落各处
- 类型定义不规范

请帮我设计一套完整的前端架构，包括：
1. 目录结构设计（分层清晰、职责明确）
2. 组件分层策略
3. 状态管理方案
4. 路由与权限管理
5. 类型系统设计
6. 样式与设计系统

请给出：完整的目录结构（树形图）、每个模块的职责说明、关键代码示例、最佳实践建议
```

---

### 📋 问题2：功能配置管理（解决硬编码）

```
我们的AI功能工作台有20+个功能，目前在page.tsx中硬编码了670行配置。

后端有feature_definitions表存储功能配置（feature_id, name, description, icon, quota_cost, status等）

请帮我设计一套功能配置驱动的架构：
1. 如何从后端API动态加载功能配置？
2. 如何设计通用的FeatureCard/FeatureGrid组件？
3. 后端返回icon字段（字符串"ScissorOutlined"），前端如何动态渲染Ant Design图标？
4. 如何支持功能分类、筛选、排序？

请给出：数据结构设计（TypeScript类型）、FeatureCard/FeatureGrid组件代码、动态图标渲染方案、API数据加载与缓存策略
```

---

### 📋 问题3：动态表单系统

```
管理后台需要配置20+个AI功能的表单，每个功能的表单字段不同。

后端有form_schemas表存储表单配置（JSON Schema格式）：
{
  "fields": [
    {"name": "image", "type": "image_upload", "label": "上传图片", "required": true},
    {"name": "style", "type": "enum", "label": "服装风格", "options": ["商务", "休闲"]},
    {"name": "intensity", "type": "number", "label": "效果强度", "min": 0, "max": 100}
  ]
}

请帮我设计一套动态表单渲染系统：
1. 如何根据JSON Schema动态渲染表单？
2. 如何支持不同的字段类型（text/number/image_upload/enum/date等）？
3. 如何根据JSON Schema自动生成验证规则？
4. 如何统一表单提交逻辑？

请给出：动态表单系统的架构设计、DynamicForm组件代码、字段类型映射表、表单验证规则生成器代码
```

---

### 📋 问题4：分页列表与数据表格

```
管理后台有大量数据表格页面（用户管理、订单管理、任务监控等），每个页面都重复写分页、筛选、数据加载逻辑，代码重复率>80%。

请帮我设计一套通用的表格页面架构：
1. 设计usePagination Hook（管理分页状态）
2. 设计useTableData Hook（管理表格数据加载）
3. 设计useTableFilter Hook（管理筛选条件）
4. 如何封装通用的DataTable组件？
5. 如何设计通用的FilterBar组件？
6. 如何实现自动刷新（轮询）？

请给出：usePagination/useTableData/useTableFilter Hook代码、DataTable通用组件代码、一个完整的表格页面示例（用户管理）
```

---

### 📋 问题5：权限管理与路由守卫

```
产品有3种角色：
1. 普通用户（只能访问工作台、素材库）
2. 分销代理（额外可访问分销中心）
3. 管理员（可访问管理后台）

当前问题：权限检查散落在每个页面、未登录用户可以访问需要登录的页面、缺少统一的权限管理。

请帮我设计一套完整的权限管理方案：
1. 如何设计权限数据结构（角色、权限、资源）？
2. 如何在Next.js App Router中实现路由守卫（middleware）？
3. 如何设计<PermissionGuard>组件（包裹需要权限的内容）？
4. 如何根据用户权限动态生成导航菜单？

请给出：权限数据结构设计（TypeScript类型）、Next.js middleware路由守卫代码、PermissionGuard组件代码、动态菜单生成逻辑
```

---

### 📋 问题6：API请求与错误处理

```
API请求使用axios封装，但存在以下问题：
1. 没有统一的错误处理（每个页面都try-catch）
2. 没有统一的loading状态管理
3. 没有请求重试机制
4. 没有请求缓存

请帮我设计一套工业级的API请求方案：
1. 如何设计请求/响应拦截器（自动添加token、处理token过期、统一错误处理）？
2. 设计useRequest Hook（管理loading/error/data状态、支持手动触发、自动重试、请求取消）
3. 如何实现请求缓存（避免重复请求）？
4. 如何实现请求/响应的类型推断？

请给出：axios配置与拦截器代码、useRequest Hook完整代码、一个页面使用useRequest的示例
```

---

## 🎯 期望输出格式

每个问题请给出：
1. ✅ 详细的解决方案（架构设计）
2. ✅ 至少3个可运行的代码示例（TypeScript）
3. ✅ 最佳实践建议
4. ✅ 常见坑和注意事项

---

## 💡 使用方法

1. 复制上面6个问题中的**任意一个**
2. 粘贴到GPT-5对话框
3. 等待GPT-5给出完整的解决方案
4. 根据GPT-5的回答重构代码

**建议顺序**：问题1（整体架构）→ 问题6（API请求）→ 问题4（表格）→ 问题2（功能配置）→ 问题3（动态表单）→ 问题5（权限）

---

**艹！一次问一个，慢慢重构，别着急！** 🔥
