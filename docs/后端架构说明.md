# AIè¡£æŸœåç«¯æ¶æ„è¯´æ˜

## ğŸ—ï¸ æ•´ä½“æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        å‰ç«¯ (Next.js)                            â”‚
â”‚  - ç”¨æˆ·ç•Œé¢ (ç™»å½•ã€å·¥ä½œå°ã€åˆ†é”€ä¸­å¿ƒã€ç®¡ç†åå°)                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“ HTTP/HTTPS
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Express.js åç«¯æœåŠ¡å™¨                         â”‚
â”‚                    (app.js + routes)                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  APIè·¯ç”±å±‚ (9ä¸ªè·¯ç”±æ¨¡å—)                                          â”‚
â”‚  - /api/auth         ç”¨æˆ·è®¤è¯ (ç™»å½•/æ³¨å†Œ/éªŒè¯ç )                  â”‚
â”‚  - /api/membership   ä¼šå‘˜å¥—é¤ (è´­ä¹°/ç»­è´¹/é…é¢)                    â”‚
â”‚  - /api/media        åª’ä½“ä¸Šä¼  (å›¾ç‰‡/è§†é¢‘ä¸Šä¼ åˆ°COS)                 â”‚
â”‚  - /api/task         ä»»åŠ¡ç®¡ç† (åˆ›å»º/æŸ¥è¯¢/å–æ¶ˆAIä»»åŠ¡)               â”‚
â”‚  - /api/admin        ç®¡ç†åå° (ç”¨æˆ·ç®¡ç†/ç»Ÿè®¡/é…ç½®)                 â”‚
â”‚  - /api/system-config ç³»ç»Ÿé…ç½® (åŠ¨æ€å‚æ•°ç®¡ç†)                     â”‚
â”‚  - /api/features     åŠŸèƒ½åˆ—è¡¨ (æŠ å›¾/æ¢è„¸/æ¢è£…ç­‰)                   â”‚
â”‚  - /api/scf          äº‘å‡½æ•°å›è°ƒ (AIä»»åŠ¡å®Œæˆé€šçŸ¥)                  â”‚
â”‚  - /api/assets       ç´ æåº“ (ç”¨æˆ·ä½œå“ç®¡ç†)                        â”‚
â”‚  - /api/distribution åˆ†é”€ä»£ç† (é‚€è¯·/ä½£é‡‘/æç°)                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ä¸šåŠ¡é€»è¾‘å±‚ (Services)                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æ ¸å¿ƒæœåŠ¡ (18ä¸ªserviceæ–‡ä»¶)                                       â”‚
â”‚  - auth.service.js          ç”¨æˆ·è®¤è¯é€»è¾‘                         â”‚
â”‚  - membership.service.js    ä¼šå‘˜å¥—é¤é€»è¾‘                         â”‚
â”‚  - task.service.js          ä»»åŠ¡è°ƒåº¦é€»è¾‘                         â”‚
â”‚  - pipelineEngine.service.js æµæ°´çº¿ç¼–æ’å¼•æ“ (æ ¸å¿ƒ!)              â”‚
â”‚  - providerBalancer.service.js ä¾›åº”å•†è´Ÿè½½å‡è¡¡                   â”‚
â”‚  - asset.service.js         ç´ æåº“ç®¡ç†                           â”‚
â”‚  - distribution.service.js  åˆ†é”€ä»£ç†é€»è¾‘                         â”‚
â”‚  ...                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    æ•°æ®è®¿é—®å±‚ (Repositories)                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æ•°æ®åº“æ“ä½œå°è£… (Knex.js)                                         â”‚
â”‚  - user.repository.js       ç”¨æˆ·è¡¨æ“ä½œ                           â”‚
â”‚  - order.repository.js      è®¢å•è¡¨æ“ä½œ                           â”‚
â”‚  - task.repository.js       ä»»åŠ¡è¡¨æ“ä½œ                           â”‚
â”‚  - asset.repository.js      ç´ æè¡¨æ“ä½œ                           â”‚
â”‚  ...                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    æŒä¹…åŒ–å±‚ (MySQLæ•°æ®åº“)                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æ ¸å¿ƒæ•°æ®è¡¨ (30+å¼ è¡¨)                                             â”‚
â”‚  - users                    ç”¨æˆ·è¡¨                               â”‚
â”‚  - orders                   è®¢å•è¡¨                               â”‚
â”‚  - tasks                    ä»»åŠ¡è¡¨                               â”‚
â”‚  - task_steps               ä»»åŠ¡æ­¥éª¤è¡¨ (æµæ°´çº¿)                   â”‚
â”‚  - assets                   ç´ æè¡¨                               â”‚
â”‚  - feature_definitions      åŠŸèƒ½å®šä¹‰è¡¨                           â”‚
â”‚  - pipeline_schemas         æµæ°´çº¿é…ç½®è¡¨                         â”‚
â”‚  - provider_endpoints       AIä¾›åº”å•†ç«¯ç‚¹è¡¨                       â”‚
â”‚  - provider_health          ä¾›åº”å•†å¥åº·æ£€æŸ¥è¡¨                     â”‚
â”‚  - distribution_*           åˆ†é”€ç›¸å…³è¡¨ (6å¼ )                      â”‚
â”‚  ...                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    å¤–éƒ¨ä¾èµ–æœåŠ¡                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  - è…¾è®¯äº‘COS        åª’ä½“æ–‡ä»¶å­˜å‚¨ (å›¾ç‰‡/è§†é¢‘)                       â”‚
â”‚  - è…¾è®¯äº‘SCF        AIä»»åŠ¡å¤„ç† (äº‘å‡½æ•°å¼‚æ­¥æ‰§è¡Œ)                    â”‚
â”‚  - Redis            ç¼“å­˜/ä¼šè¯ç®¡ç†                                 â”‚
â”‚  - é˜¿é‡Œäº‘çŸ­ä¿¡       éªŒè¯ç å‘é€                                    â”‚
â”‚  - å¾®ä¿¡æ”¯ä»˜         æ”¯ä»˜æ¥å£                                      â”‚
â”‚  - AIä¾›åº”å•†ç«¯ç‚¹     å¤šä¸ªAIæœåŠ¡æä¾›å•† (è´Ÿè½½å‡è¡¡)                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“‚ ç›®å½•ç»“æ„è¯¦è§£

### åç«¯æ ¸å¿ƒç›®å½• (`backend/src/`)

```
backend/src/
â”œâ”€â”€ app.js                    # Expressåº”ç”¨é…ç½® (ä¸­é—´ä»¶ã€è·¯ç”±ã€å®‰å…¨)
â”œâ”€â”€ server.js                 # æœåŠ¡å™¨å¯åŠ¨å…¥å£ (ç›‘å¬ç«¯å£ã€æ•°æ®åº“è¿æ¥)
â”‚
â”œâ”€â”€ routes/                   # è·¯ç”±å±‚ (9ä¸ªè·¯ç”±æ¨¡å—)
â”‚   â”œâ”€â”€ auth.routes.js        # /api/auth - ç™»å½•/æ³¨å†Œ/éªŒè¯ç 
â”‚   â”œâ”€â”€ membership.routes.js  # /api/membership - è´­ä¹°å¥—é¤/æŸ¥è¯¢é…é¢
â”‚   â”œâ”€â”€ task.routes.js        # /api/task - åˆ›å»ºä»»åŠ¡/æŸ¥è¯¢çŠ¶æ€
â”‚   â”œâ”€â”€ admin.routes.js       # /api/admin - ç®¡ç†åå°
â”‚   â”œâ”€â”€ distribution.routes.js# /api/distribution - åˆ†é”€ä»£ç†
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ controllers/              # æ§åˆ¶å™¨å±‚ (å¤„ç†HTTPè¯·æ±‚/å“åº”)
â”‚   â”œâ”€â”€ auth.controller.js    # ç”¨æˆ·è®¤è¯æ§åˆ¶å™¨
â”‚   â”œâ”€â”€ task.controller.js    # ä»»åŠ¡æ§åˆ¶å™¨
â”‚   â”œâ”€â”€ distribution.controller.js # åˆ†é”€æ§åˆ¶å™¨
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ services/                 # ä¸šåŠ¡é€»è¾‘å±‚ (æ ¸å¿ƒä¸šåŠ¡é€»è¾‘)
â”‚   â”œâ”€â”€ auth.service.js       # è®¤è¯æœåŠ¡ (JWT/Session)
â”‚   â”œâ”€â”€ membership.service.js # ä¼šå‘˜æœåŠ¡ (å¥—é¤/é…é¢æ‰£é™¤)
â”‚   â”œâ”€â”€ task.service.js       # ä»»åŠ¡æœåŠ¡ (ä»»åŠ¡è°ƒåº¦)
â”‚   â”œâ”€â”€ pipelineEngine.service.js # æµæ°´çº¿ç¼–æ’å¼•æ“ (æ ¸å¿ƒ!)
â”‚   â”œâ”€â”€ providerBalancer.service.js # ä¾›åº”å•†è´Ÿè½½å‡è¡¡
â”‚   â”œâ”€â”€ distribution.service.js # åˆ†é”€ä»£ç†æœåŠ¡
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ repositories/             # æ•°æ®è®¿é—®å±‚ (æ•°æ®åº“æ“ä½œ)
â”‚   â”œâ”€â”€ user.repository.js    # ç”¨æˆ·è¡¨æ“ä½œ
â”‚   â”œâ”€â”€ task.repository.js    # ä»»åŠ¡è¡¨æ“ä½œ
â”‚   â”œâ”€â”€ asset.repository.js   # ç´ æè¡¨æ“ä½œ
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ middlewares/              # ä¸­é—´ä»¶ (è®¤è¯/æƒé™/é”™è¯¯å¤„ç†)
â”‚   â”œâ”€â”€ auth.middleware.js    # JWTè®¤è¯ä¸­é—´ä»¶
â”‚   â”œâ”€â”€ admin.middleware.js   # ç®¡ç†å‘˜æƒé™ä¸­é—´ä»¶
â”‚   â”œâ”€â”€ errorHandler.middleware.js # å…¨å±€é”™è¯¯å¤„ç†
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ db/                       # æ•°æ®åº“é…ç½®
â”‚   â”œâ”€â”€ migrations/           # æ•°æ®åº“è¿ç§»æ–‡ä»¶ (30+ä¸ªè¡¨ç»“æ„)
â”‚   â””â”€â”€ knexfile.js           # Knexé…ç½®
â”‚
â”œâ”€â”€ config/                   # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ database.js           # MySQLè¿æ¥é…ç½®
â”‚   â”œâ”€â”€ redis.js              # Redisé…ç½®
â”‚   â”œâ”€â”€ cos.js                # è…¾è®¯äº‘COSé…ç½®
â”‚   â””â”€â”€ env.validator.js      # ç¯å¢ƒå˜é‡éªŒè¯
â”‚
â””â”€â”€ utils/                    # å·¥å…·å‡½æ•°
    â”œâ”€â”€ logger.js             # æ—¥å¿—å·¥å…·
    â”œâ”€â”€ jwt.js                # JWTå·¥å…·
    â””â”€â”€ ...
```

---

## ğŸ”¥ æ ¸å¿ƒä¸šåŠ¡æ¨¡å—

### 1. ç”¨æˆ·è®¤è¯ç³»ç»Ÿ (`/api/auth`)

**è·¯ç”±**: `routes/auth.routes.js`
**æ§åˆ¶å™¨**: `controllers/auth.controller.js`
**æœåŠ¡**: `services/auth.service.js`
**æ•°æ®è¡¨**: `users`, `verification_codes`

**åŠŸèƒ½**:
- âœ… æ‰‹æœºå·ç™»å½•/æ³¨å†Œ
- âœ… éªŒè¯ç å‘é€ä¸éªŒè¯
- âœ… JWT Tokenç”Ÿæˆä¸éªŒè¯
- âœ… ä¼šè¯ç®¡ç†

---

### 2. ä¼šå‘˜ç³»ç»Ÿ (`/api/membership`)

**è·¯ç”±**: `routes/membership.routes.js`
**æ§åˆ¶å™¨**: `controllers/membership.controller.js`
**æœåŠ¡**: `services/membership.service.js`
**æ•°æ®è¡¨**: `orders`, `users` (quotaå­—æ®µ)

**åŠŸèƒ½**:
- âœ… å¥—é¤è´­ä¹° (19.9å…ƒ/30æ¬¡, 38.8å…ƒ/70æ¬¡...)
- âœ… é…é¢æŸ¥è¯¢ä¸æ‰£é™¤
- âœ… ç»­è´¹ä¸å‡çº§
- âœ… é€€æ¬¾å¤„ç†

---

### 3. AIä»»åŠ¡ç³»ç»Ÿ (`/api/task`) - **æ ¸å¿ƒæ¨¡å—**

**è·¯ç”±**: `routes/task.routes.js`
**æ§åˆ¶å™¨**: `controllers/task.controller.js`
**æœåŠ¡**:
- `services/task.service.js` (ä»»åŠ¡è°ƒåº¦)
- `services/pipelineEngine.service.js` (æµæ°´çº¿ç¼–æ’å¼•æ“)
- `services/providerBalancer.service.js` (ä¾›åº”å•†è´Ÿè½½å‡è¡¡)

**æ•°æ®è¡¨**:
- `tasks` (ä»»åŠ¡ä¸»è¡¨)
- `task_steps` (ä»»åŠ¡æ­¥éª¤æ˜ç»†)
- `feature_definitions` (åŠŸèƒ½å®šä¹‰: æŠ å›¾/æ¢è„¸/æ¢è£…...)
- `pipeline_schemas` (æµæ°´çº¿é…ç½®)
- `provider_endpoints` (AIä¾›åº”å•†ç«¯ç‚¹)
- `provider_health` (ä¾›åº”å•†å¥åº·æ£€æŸ¥)

**å·¥ä½œæµç¨‹**:
```
ç”¨æˆ·æäº¤ä»»åŠ¡ â†’ æ‰£é™¤é…é¢ â†’ æµæ°´çº¿ç¼–æ’ â†’ ä¾›åº”å•†é€‰æ‹© â†’ è°ƒç”¨äº‘å‡½æ•° â†’ å¼‚æ­¥å¤„ç† â†’ å›è°ƒé€šçŸ¥ â†’ ä¿å­˜ç´ æåº“
```

**æ ¸å¿ƒå¼•æ“: pipelineEngine.service.js**
```javascript
// æµæ°´çº¿ç¼–æ’ç¤ºä¾‹:
// ç”¨æˆ·é€‰æ‹©"AIæ¢è£…" â†’ è‡ªåŠ¨ç¼–æ’3ä¸ªæ­¥éª¤:
// Step 1: äººä½“åˆ†å‰² (ä¾›åº”å•†A)
// Step 2: æœè£…ç”Ÿæˆ (ä¾›åº”å•†B)
// Step 3: å›¾åƒèåˆ (ä¾›åº”å•†C)
// æ¯ä¸ªæ­¥éª¤è‡ªåŠ¨é€‰æ‹©æœ€ä¼˜ä¾›åº”å•† (è´Ÿè½½å‡è¡¡)
```

---

### 4. åˆ†é”€ä»£ç†ç³»ç»Ÿ (`/api/distribution`)

**è·¯ç”±**: `routes/distribution.routes.js`
**æ§åˆ¶å™¨**: `controllers/distribution.controller.js`
**æœåŠ¡**: `services/distribution.service.js`
**æ•°æ®è¡¨**:
- `distribution_agents` (ä»£ç†å•†è¡¨)
- `distribution_invitations` (é‚€è¯·è®°å½•)
- `distribution_commissions` (ä½£é‡‘æ˜ç»†)
- `distribution_withdrawals` (æç°è®°å½•)

**åŠŸèƒ½**:
- âœ… é‚€è¯·ç ç”Ÿæˆ
- âœ… ä½£é‡‘è®¡ç®— (ä¸¤çº§åˆ†é”€: 10% + 5%)
- âœ… æç°ç”³è¯·ä¸å®¡æ ¸
- âœ… åˆ†é”€æ•°æ®çœ‹æ¿

---

### 5. ç®¡ç†åå° (`/api/admin`)

**è·¯ç”±**: `routes/admin.routes.js`
**æ§åˆ¶å™¨**: `controllers/admin.controller.js`
**åŠŸèƒ½**:
- âœ… ç”¨æˆ·ç®¡ç† (æŸ¥è¯¢/å°ç¦/é…é¢èµ é€)
- âœ… è®¢å•ç»Ÿè®¡ (GMV/é€€æ¬¾ç‡/ARPU)
- âœ… ä»»åŠ¡ç›‘æ§ (æˆåŠŸç‡/å¤±è´¥ç‡/è€—æ—¶)
- âœ… ç³»ç»Ÿé…ç½® (åŠ¨æ€å‚æ•°ç®¡ç†)

---

## ğŸ†• æ•°æ®åˆ†æç³»ç»Ÿ (æ–°å¢)

**ç›®å½•**: `tasks/data-analysis-system/`

### æ¶æ„è®¾è®¡

```
ç”¨æˆ·æé—®: "å¸®æˆ‘åˆ†æ7æ—¥ç•™å­˜ç‡ä¸‹é™åŸå› "
    â†“
GPT-5è¯»å–ä»»åŠ¡æ¨¡æ¿ (æ•°æ®åˆ†æå¸ˆ-ä»»åŠ¡æ¨¡æ¿.md)
    â†“
GPT-5ç”Ÿæˆå®Œæ•´SQLä»£ç  (Cohortç•™å­˜åˆ†æ)
    â†“
backend_dev_skillæ‰§è¡ŒSQL (è¿æ¥MySQLæ•°æ®åº“)
    â†“
è¾“å‡º: cohort_retention.csv, analysis_report.md
    â†“
frontend_dev_skillæ¸²æŸ“çœ‹æ¿ (çƒ­åŠ›å›¾å¯è§†åŒ–)
```

### ä»»åŠ¡æ¨¡æ¿ (14ä¸ª)

**æ•°æ®åˆ†æå¸ˆä»»åŠ¡ (12ä¸ªSQLä»»åŠ¡)**:
- TEMPLATE-001: ç”¨æˆ·å¢é•¿ä¸ç•™å­˜ä½“ç³»
- TEMPLATE-002: ç”¨æˆ·æµå¤±åˆ†æä¸å¬å›ç­–ç•¥
- TEMPLATE-003: ç”¨æˆ·ç”»åƒä¸åˆ†ç¾¤ (RFM)
- TEMPLATE-004: åŠŸèƒ½ä½¿ç”¨åˆ†æ
- TEMPLATE-005: é…é¢æ¶ˆè€—ä¸é€€æ¬¾ç‡åˆ†æ
- TEMPLATE-006: æ”¶å…¥ä¸GMVç»“æ„åˆ†æ
- TEMPLATE-007: æ¸ é“åˆ†æä¸å½’å› 
- TEMPLATE-008: è¥é”€æ´»åŠ¨æ•ˆæœè¯„ä¼° (A/Bå®éªŒ)
- TEMPLATE-009: æ¼æ–—åˆ†æ
- TEMPLATE-010: ç”¨æˆ·è¡Œä¸ºè·¯å¾„åˆ†æ
- TEMPLATE-011: å‘¨æŠ¥è‡ªåŠ¨ç”Ÿæˆ
- TEMPLATE-012: æœˆæŠ¥è‡ªåŠ¨ç”Ÿæˆ

**æ•°æ®ç§‘å­¦å®¶ä»»åŠ¡ (2ä¸ªPython MLä»»åŠ¡)**:
- TEMPLATE-ML-001: ç”¨æˆ·æµå¤±é¢„æµ‹å»ºæ¨¡ (XGBoost + ROIä¼˜åŒ–)
- TEMPLATE-ML-002: A/Bå®éªŒæ¡†æ¶ (ç»Ÿè®¡æ˜¾è‘—æ€§æ£€éªŒ)

### æ•°æ®è¡¨æ˜ å°„

**ç°æœ‰æ•°æ®è¡¨ â†’ åˆ†æä»»åŠ¡**:
```sql
-- ç”¨æˆ·å¢é•¿åˆ†æ
users â†’ æ³¨å†Œæ—¶é—´/æ¸ é“/åœ°åŸŸ
user_daily_active â†’ DAU/ç•™å­˜è®¡ç®— (éœ€æ–°å»º)

-- è®¢å•åˆ†æ
orders â†’ GMV/ARPU/é€€æ¬¾ç‡

-- ä»»åŠ¡åˆ†æ
tasks â†’ åŠŸèƒ½ä½¿ç”¨ç‡/æˆåŠŸç‡/é…é¢æ¶ˆè€—

-- åˆ†é”€åˆ†æ
distribution_commissions â†’ æ¸ é“å½’å› /è½¬åŒ–ç‡
```

**ç¼ºå¤±è¡¨ (éœ€è¡¥å……)**:
- `user_daily_active` (æ¯æ—¥æ´»è·ƒæ˜ç»†)
- `user_attribution` (æ¸ é“å½’å› )
- `event_logs` (ç”¨æˆ·è¡Œä¸ºäº‹ä»¶æ—¥å¿—)

---

## ğŸ”— ç³»ç»Ÿé›†æˆå…³ç³»

### CMSåç«¯ + æ•°æ®åˆ†æç³»ç»Ÿ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              AIè¡£æŸœä¸šåŠ¡ç³»ç»Ÿ (CMSåç«¯)                       â”‚
â”‚  - ç”¨æˆ·è®¤è¯ã€ä¼šå‘˜è´­ä¹°ã€AIä»»åŠ¡å¤„ç†ã€åˆ†é”€ä»£ç†                 â”‚
â”‚  - å®æ—¶ä¸šåŠ¡æ•°æ®å†™å…¥MySQLæ•°æ®åº“                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†“ æ•°æ®æ²‰æ·€
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    MySQLä¸šåŠ¡æ•°æ®åº“                         â”‚
â”‚  - users, orders, tasks, distribution_*                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†“ æ•°æ®åˆ†æ
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              æ•°æ®åˆ†æç³»ç»Ÿ (GPT-5 + Skills)                  â”‚
â”‚  - GPT-5è¯»å–ä»»åŠ¡æ¨¡æ¿ç”ŸæˆSQL/Pythonä»£ç                       â”‚
â”‚  - backend_dev_skillæ‰§è¡Œä»£ç æŸ¥è¯¢æ•°æ®åº“                      â”‚
â”‚  - è¾“å‡º: CSVæŠ¥è¡¨ã€å¯è§†åŒ–çœ‹æ¿ã€åˆ†ææŠ¥å‘Š                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Skillså·¥ä½œæµç¨‹

```
Product Planner Skill (éœ€æ±‚åˆ†æ)
    â†“ ç”Ÿæˆä»»åŠ¡å¡
Backend Dev Skill (æ‰§è¡ŒSQL/Pythonä»£ç )
    â†“ è¾“å‡ºCSVæ•°æ®
Frontend Dev Skill (æ¸²æŸ“å¯è§†åŒ–çœ‹æ¿)
    â†“ ç”¨æˆ·æŸ¥çœ‹æŠ¥è¡¨
Reviewer Skill (ä»£ç å®¡æŸ¥)
    â†“ è´¨é‡æ£€æŸ¥
Codebuddy Deploy Skill (éƒ¨ç½²ä¸Šçº¿)
```

---

## ğŸ¯ æ ¸å¿ƒä¼˜åŠ¿

### 1. åˆ†å±‚æ¶æ„æ¸…æ™°
- âœ… **è·¯ç”±å±‚**: å¤„ç†HTTPè¯·æ±‚
- âœ… **æ§åˆ¶å™¨å±‚**: è¯·æ±‚å‚æ•°éªŒè¯
- âœ… **æœåŠ¡å±‚**: æ ¸å¿ƒä¸šåŠ¡é€»è¾‘
- âœ… **ä»“å‚¨å±‚**: æ•°æ®åº“æ“ä½œå°è£…
- âœ… **æ•°æ®å±‚**: MySQLæŒä¹…åŒ–

### 2. æµæ°´çº¿ç¼–æ’å¼•æ“ (æ ¸å¿ƒç«äº‰åŠ›)
- âœ… **åŠ¨æ€é…ç½®**: é€šè¿‡`pipeline_schemas`è¡¨é…ç½®æµæ°´çº¿
- âœ… **ä¾›åº”å•†è´Ÿè½½å‡è¡¡**: è‡ªåŠ¨é€‰æ‹©æœ€ä¼˜AIæœåŠ¡æä¾›å•†
- âœ… **å¼‚æ­¥å¤„ç†**: äº‘å‡½æ•°å¼‚æ­¥æ‰§è¡Œ,å›è°ƒé€šçŸ¥
- âœ… **æ­¥éª¤è¿½è¸ª**: `task_steps`è¡¨è®°å½•æ¯ä¸ªæ­¥éª¤çŠ¶æ€

### 3. æ•°æ®åˆ†æèƒ½åŠ› (æ–°å¢)
- âœ… **GPT-5æ™ºèƒ½åˆ†æ**: è‡ªåŠ¨ç”ŸæˆSQL/Pythonä»£ç 
- âœ… **ä»»åŠ¡æ¨¡æ¿å¤ç”¨**: 14ä¸ªé«˜è´¨é‡ä»»åŠ¡æ¨¡æ¿
- âœ… **æˆæœ¬ä½**: ä¸€æ¬¡æ€§æŠ•å…¥$1-2,æ°¸ä¹…å¤ç”¨
- âœ… **ä»£ç è´¨é‡é«˜**: SQLå®Œæ•´åº¦90%+, Pythonå®Œæ•´åº¦95%+

---

## âš ï¸ å¾…è¡¥å……çš„åŠŸèƒ½

### 1. ç”¨æˆ·æ´»è·ƒæ•°æ®æ”¶é›†
```sql
-- éœ€è¦æ·»åŠ æ¯æ—¥æ´»è·ƒè®°å½•è¡¨
CREATE TABLE user_daily_active (
  id INT PRIMARY KEY AUTO_INCREMENT,
  user_id INT NOT NULL,
  active_date DATE NOT NULL,
  channel VARCHAR(50),
  platform VARCHAR(20),
  country VARCHAR(50),
  UNIQUE KEY uk_user_date (user_id, active_date),
  KEY idx_active_date (active_date)
);

-- åœ¨ç”¨æˆ·ç™»å½•/ä»»åŠ¡æäº¤æ—¶æ’å…¥æ´»è·ƒè®°å½•
INSERT INTO user_daily_active (user_id, active_date, channel, platform, country)
VALUES (?, CURDATE(), ?, ?, ?)
ON DUPLICATE KEY UPDATE active_date = CURDATE();
```

### 2. ç”¨æˆ·è¡Œä¸ºäº‹ä»¶æ—¥å¿—
```sql
-- ç”¨äºç”¨æˆ·è·¯å¾„åˆ†æ
CREATE TABLE event_logs (
  id BIGINT PRIMARY KEY AUTO_INCREMENT,
  user_id INT NOT NULL,
  event_name VARCHAR(100), -- 'page_view', 'click_feature', 'purchase'
  event_time DATETIME DEFAULT CURRENT_TIMESTAMP,
  properties JSON,
  KEY idx_user_time (user_id, event_time),
  KEY idx_event_time (event_name, event_time)
);
```

---

## ğŸš€ ä¸‹ä¸€æ­¥è¡ŒåŠ¨

### ç«‹å³å¯ç”¨çš„åŠŸèƒ½
1. âœ… **ç”¨æˆ·å¢é•¿åˆ†æ**: ä½¿ç”¨`orders`è¡¨åˆ†ææ–°å¢ç”¨æˆ·è¶‹åŠ¿
2. âœ… **æ”¶å…¥GMVåˆ†æ**: ä½¿ç”¨`orders`è¡¨åˆ†ææ”¶å…¥ç»“æ„
3. âœ… **åŠŸèƒ½ä½¿ç”¨åˆ†æ**: ä½¿ç”¨`tasks`è¡¨åˆ†æåŠŸèƒ½è°ƒç”¨é‡
4. âœ… **åˆ†é”€æ•ˆæœåˆ†æ**: ä½¿ç”¨`distribution_*`è¡¨åˆ†ææ¸ é“è½¬åŒ–ç‡

### éœ€è¦è¡¥å……æ•°æ®çš„åŠŸèƒ½
1. â³ **ç•™å­˜åˆ†æ**: éœ€è¦`user_daily_active`è¡¨
2. â³ **æµå¤±å¬å›**: éœ€è¦`user_daily_active`è¡¨
3. â³ **ç”¨æˆ·è·¯å¾„**: éœ€è¦`event_logs`è¡¨
4. â³ **æ¸ é“å½’å› **: éœ€è¦`user_attribution`è¡¨

---

## ğŸ“ æ€»ç»“

**åç«¯ç»“æ„æ¸…æ™°,åˆ†ä¸º3å¤§éƒ¨åˆ†:**

1. **CMSä¸šåŠ¡ç³»ç»Ÿ** (å·²å®Œæˆ)
   - Express.jsåç«¯ (9ä¸ªè·¯ç”±æ¨¡å—)
   - ç”¨æˆ·/ä¼šå‘˜/ä»»åŠ¡/åˆ†é”€/ç®¡ç†åŠŸèƒ½å®Œæ•´
   - æµæ°´çº¿ç¼–æ’å¼•æ“ (æ ¸å¿ƒç«äº‰åŠ›)

2. **æ•°æ®åˆ†æç³»ç»Ÿ** (åˆšæ•´ç†å®Œæˆ)
   - GPT-5ç”Ÿæˆçš„14ä¸ªä»»åŠ¡æ¨¡æ¿
   - å¯ç«‹å³æ‰§è¡Œçš„SQL/Pythonä»£ç 
   - éœ€è¦è¡¥å……éƒ¨åˆ†æ•°æ®è¡¨

3. **Skillså·¥ä½œæµ** (ååŒç³»ç»Ÿ)
   - Product Planner: éœ€æ±‚åˆ†æ
   - Backend Dev: ä»£ç æ‰§è¡Œ
   - Frontend Dev: å¯è§†åŒ–æ¸²æŸ“
   - Reviewer: ä»£ç å®¡æŸ¥
   - Codebuddy Deploy: éƒ¨ç½²ä¸Šçº¿

**è‰¹ï¼è€ç‹æˆ‘æŠŠæ¶æ„ç†æ¸…æ¥šäº†,çœ‹æ‡‚äº†å—?** ğŸ”¥
