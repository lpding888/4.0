===========================================
GPT-5 Pro 专用提问（前端版）
===========================================

【提问标题】
AI衣柜前端架构重构 - 系统性解决方案（登录优化、Token刷新、WebSocket推送、错误监控）

---

【前置阅读】
请先完整阅读以下文档，了解项目背景和问题详情：

文档位置：
c:\Users\qq100\Desktop\迭代目录\新建文件夹 (4)\docs\前端架构重构问题报告-GPT5专用.md

该文档包含：
- 项目前置条件（技术栈、业务流程、关键文件）
- 当前架构现状（架构图、代码证据）
- P0级致命问题（3个，含代码证据和风险分析）
- P1级严重问题（3个，含性能影响）
- 期望交付产出（4个方案，含详细要求）

---

【核心问题概述】

我是一个AI图片/视频处理平台的前端架构师，当前系统存在以下致命问题：

P0级（必须立即解决）：
1. 登录功能缺少密码登录选项 → 用户体验差、功能不完整
2. Token刷新机制缺失，401响应直接登出 → 用户频繁被登出
3. 支付功能依赖后端MOCK数据 → 无法真实支付（归属后端问题）

P1级（影响性能与体验）：
4. 任务状态使用轮询，无WebSocket实时推送 → 数据库压力大、实时性差
5. 缺少错误监控（Sentry）集成 → 生产环境错误无法追踪
6. 没有API文档（Swagger UI） → 前端开发效率低（归属后端问题）

---

【你需要做什么】

请基于我提供的完整文档，给出系统性的前端架构重构方案。

**必须产出：**

1. 【设计文档】4个方案的详细设计文档（Markdown格式）
   - 方案1：密码登录功能（登录方式切换 + 忘记密码 + 设置密码引导）
   - 方案2：Token刷新机制（Axios拦截器 + 双Token管理 + 请求重试）
   - 方案3：WebSocket实时推送（Socket.IO客户端 + 任务状态推送 + 支付状态推送）
   - 方案4：Sentry错误监控（ErrorBoundary集成 + API错误上报 + 用户行为追踪）

2. 【完整代码示例】每个方案的代码实现（TypeScript/React）
   - 必须是完整可运行的代码（不要伪代码）
   - 包含单元测试示例（Jest + React Testing Library）
   - 包含环境变量配置（.env.example）

3. 【实施路线图】分阶段实施计划
   - 每个阶段的任务清单（P0 → P1）
   - 时间估算（开发 + 测试）
   - 技术风险评估
   - 向后兼容性说明

4. 【测试方案】
   - 单元测试示例（Jest + React Testing Library）
   - 集成测试示例（测试登录流程、Token刷新）
   - E2E测试方案（Playwright测试脚本）

---

【重要要求】

✅ 每个方案都要有完整的设计文档、流程图、代码示例
✅ 代码必须是完整可运行的（不要伪代码）
✅ 考虑向后兼容性（不能影响现有功能）
✅ 提供分阶段实施计划（优先解决P0问题）
✅ 包含测试方案和性能评估

❌ 不要给出简化方案（我需要生产级完整方案）
❌ 不要省略关键代码（如"...此处省略"）
❌ 不要使用伪代码（必须是真实可运行代码）

---

【产出格式】

请以Markdown格式产出多个文档：

1. 总纲：《前端架构重构方案总纲.md》
2. 详细设计：《方案1-密码登录功能.md》... 《方案4-Sentry错误监控.md》
3. 代码文件：TypeScript/React源码
4. 测试代码：Jest + Playwright测试示例
5. 配置文件：.env配置
6. 实施路线图：《前端实施路线图.md》

---

【开始吧，GPT-5！】

我已经把所有前置条件、代码证据、问题分析都整理好了。
现在需要你基于这份完整的报告，给出系统性的前端架构重构方案！

文档路径（请先阅读）：
c:\Users\qq100\Desktop\迭代目录\新建文件夹 (4)\docs\前端架构重构问题报告-GPT5专用.md

期待你的完整方案！💪🔥

===========================================
