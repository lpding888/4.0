# ================================
# AI照后端 - 开发环境Dockerfile
# ================================
# 艹！开发环境专用，支持热重载和调试
#
# 使用方法:
# docker-compose -f docker-compose.dev.yml up backend

FROM node:18-alpine

# 艹！设置工作目录
WORKDIR /app

# 艹！安装开发工具（支持nodemon热重载）
RUN apk add --no-cache \
    curl \
    git

# 艹！复制package文件（利用缓存层）
COPY package*.json ./

# 艹！安装所有依赖（包括devDependencies）
RUN npm install && \
    npm cache clean --force

# 艹！复制源代码（实际会被volume覆盖，这里只是初始化）
COPY . .

# 艹！暴露端口
EXPOSE 3000

# 艹！开发模式启动（nodemon自动重启）
CMD ["npm", "run", "dev"]
