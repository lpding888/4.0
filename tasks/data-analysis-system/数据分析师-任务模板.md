# æ•°æ®åˆ†æå¸ˆä»»åŠ¡æ¨¡æ¿

## ğŸ“‹ ä½¿ç”¨è¯´æ˜

**æœ¬æ–‡ä»¶æ˜¯GPT-5ç”Ÿæˆå®Œæ•´ä»»åŠ¡å¡æ—¶çš„å‚è€ƒæ¨¡æ¿ï¼Œä¸æ˜¯æ‰§è¡ŒSkillï¼**

### å·¥ä½œæµç¨‹

```
ç”¨æˆ·æé—®ï¼š"å¸®æˆ‘åˆ†æ7æ—¥ç•™å­˜ç‡ä¸‹é™åŸå› "
    â†“
GPT-5è¯»å–æœ¬æ¨¡æ¿ï¼Œè¯†åˆ«ä»»åŠ¡ç±»å‹ï¼ˆç•™å­˜åˆ†æ â†’ TEMPLATE-001ï¼‰
    â†“
GPT-5ç”Ÿæˆå®Œæ•´ä»»åŠ¡å¡ï¼ˆåŒ…å«å®Œæ•´SQLä»£ç ï¼‰
    â†“
backend_dev_skillæ‰§è¡ŒSQLä»£ç 
    â†“
è¾“å‡ºï¼šç•™å­˜çƒ­åŠ›å›¾.csvã€åˆ†ææŠ¥å‘Š.mdã€SQLè„šæœ¬.sql
```

### ä»»åŠ¡å¡è´¨é‡è¯„ä¼°

- âœ… **SQLå®Œæ•´æ€§**ï¼š95åˆ†ï¼ˆå¯ç›´æ¥è¿è¡Œï¼‰
- âœ… **ä¸šåŠ¡é€»è¾‘**ï¼š95åˆ†ï¼ˆåˆ†ææ¸…æ™°ï¼‰
- âœ… **å¯æ‰§è¡Œæ€§**ï¼š90åˆ†ï¼ˆéœ€æ˜ å°„è¡¨åï¼‰
- âœ… **ç»¼åˆè¯„åˆ†**ï¼š93åˆ†

---

## ä»»åŠ¡æ¨¡æ¿åˆ—è¡¨ï¼ˆ12ä¸ªï¼‰

ä»¥ä¸‹æ¨¡æ¿ç”±GPT-5ç”Ÿæˆï¼ŒåŒ…å«å®Œæ•´çš„SQLä»£ç å’Œä¸šåŠ¡é€»è¾‘ã€‚

---

### TEMPLATE-001: ç”¨æˆ·å¢é•¿ä¸ç•™å­˜ä½“ç³»

**å…¸å‹é—®é¢˜ï¼š**
- ä¸ºä»€ä¹ˆDAUä»5000é™åˆ°4200ï¼Ÿ
- å“ªä¸ªæ¸ é“çš„7æ—¥ç•™å­˜ç‡æœ€é«˜ï¼Ÿ
- æ–°ç”¨æˆ·é¦–å‘¨æµå¤±ç‡æ˜¯å¤šå°‘ï¼Ÿ

**åˆ†æç»´åº¦ï¼š**
- æ—¶é—´ï¼ˆæ—¥/å‘¨/æœˆï¼‰
- æ¸ é“ï¼ˆutm_source/medium/campaign/è‡ªç„¶ï¼‰
- ç«¯ï¼ˆweb/iOS/Androidï¼‰
- åœ°åŸŸï¼ˆcountry/province/cityï¼‰
- æ–°/è€ç”¨æˆ·

**æ ¸å¿ƒæŒ‡æ ‡ï¼š**
- DAU/WAU/MAU
- DAU/MAUç²˜æ€§
- æ–°å¢æ³¨å†Œæ•°
- æ¬¡æ—¥/7æ—¥/30æ—¥ç•™å­˜ç‡
- å›è®¿ç‡
- æ–°ç”¨æˆ·é¦–å‘¨æµå¤±ç‡

**æ•°æ®æºï¼š**
- usersï¼ˆç”¨æˆ·è¡¨ï¼‰
- user_daily_activeï¼ˆæ¯æ—¥æ´»è·ƒæ˜ç»†ï¼‰
- user_attributionï¼ˆæ¸ é“å½’å› ï¼‰
- ordersï¼ˆè®¢å•è¡¨ï¼‰

**å®Œæ•´SQLä»£ç ï¼š**

```sql
-- MySQL 8.0
-- å‡è®¾è¡¨ï¼šusers, user_daily_active, user_attribution, orders
-- å‚æ•°
SET @start_date = DATE('2025-09-01');
SET @end_date   = DATE('2025-10-31');

/* A. Cohort ç•™å­˜ï¼ˆ0-30å¤©çƒ­åŠ›å›¾ï¼Œè¡Œ=æ³¨å†Œæ—¥ï¼Œåˆ—=D0..D30ï¼‰ */
WITH regs AS (
  SELECT u.user_id, DATE(u.register_time) AS cohort_date
  FROM users u
  WHERE DATE(u.register_time) BETWEEN @start_date AND @end_date
),
acts AS (
  SELECT DISTINCT user_id, DATE(active_date) AS active_date
  FROM user_daily_active
  WHERE active_date BETWEEN @start_date AND DATE_ADD(@end_date, INTERVAL 30 DAY)
),
co AS (
  SELECT r.cohort_date,
         DATEDIFF(a.active_date, r.cohort_date) AS d,
         COUNT(DISTINCT r.user_id) AS retained_users
  FROM regs r
  JOIN acts a ON a.user_id = r.user_id
             AND a.active_date BETWEEN r.cohort_date AND DATE_ADD(r.cohort_date, INTERVAL 30 DAY)
  GROUP BY r.cohort_date, d
  HAVING d BETWEEN 0 AND 30
),
base AS (
  SELECT cohort_date, COUNT(DISTINCT user_id) AS cohort_size
  FROM regs GROUP BY cohort_date
)
SELECT co.cohort_date,
       MAX(CASE WHEN d=0  THEN retained_users END) / b.cohort_size AS D0,
       MAX(CASE WHEN d=1  THEN retained_users END) / b.cohort_size AS D1,
       MAX(CASE WHEN d=2  THEN retained_users END) / b.cohort_size AS D2,
       MAX(CASE WHEN d=3  THEN retained_users END) / b.cohort_size AS D3,
       MAX(CASE WHEN d=7  THEN retained_users END) / b.cohort_size AS D7,
       MAX(CASE WHEN d=14 THEN retained_users END) / b.cohort_size AS D14,
       MAX(CASE WHEN d=30 THEN retained_users END) / b.cohort_size AS D30
FROM co
JOIN base b USING(cohort_date)
GROUP BY co.cohort_date
ORDER BY co.cohort_date;

/* B. å¢é•¿çœ‹æ¿ï¼ˆæŒ‰æ—¥Ã—æ¸ é“Ã—ç«¯Ã—åœ°åŸŸï¼‰*/
WITH RECURSIVE d AS (
  SELECT @start_date AS dt
  UNION ALL SELECT DATE_ADD(dt, INTERVAL 1 DAY) FROM d WHERE dt < @end_date
),
new_users AS (
  SELECT DATE(register_time) dt, channel, platform, country,
         COUNT(*) AS new_regs
  FROM users
  WHERE DATE(register_time) BETWEEN @start_date AND @end_date
  GROUP BY 1,2,3,4
),
dau AS (
  SELECT active_date AS dt, channel, platform, country,
         COUNT(DISTINCT user_id) AS dau
  FROM user_daily_active
  WHERE active_date BETWEEN @start_date AND @end_date
  GROUP BY 1,2,3,4
)
SELECT d.dt,
       COALESCE(n.channel, a.channel, 'unknown') AS channel,
       COALESCE(n.platform, a.platform, 'unknown') AS platform,
       COALESCE(n.country, a.country, 'unknown') AS country,
       COALESCE(new_regs,0) AS new_regs,
       COALESCE(dau,0) AS dau
FROM d
LEFT JOIN new_users n ON n.dt = d.dt
LEFT JOIN dau a ON a.dt = d.dt
  AND a.channel = n.channel
  AND a.platform = n.platform
  AND a.country = n.country
ORDER BY d.dt, channel, platform, country;

/* C. åŒæ¯”/ç¯æ¯”ç¤ºä¾‹ï¼ˆä»¥ DAU ä¸ºä¾‹ï¼‰*/
WITH daily AS (
  SELECT active_date AS dt, COUNT(DISTINCT user_id) AS dau
  FROM user_daily_active
  WHERE active_date BETWEEN @start_date AND @end_date
  GROUP BY active_date
)
SELECT dt, dau,
       LAG(dau,1) OVER (ORDER BY dt) AS dau_d_1,
       CASE WHEN LAG(dau,1) OVER (ORDER BY dt) IS NULL THEN NULL
            WHEN LAG(dau,1) OVER (ORDER BY dt)=0 THEN NULL
            ELSE (dau - LAG(dau,1) OVER (ORDER BY dt)) / LAG(dau,1) OVER (ORDER BY dt)
       END AS wow,
       LAG(dau,365) OVER (ORDER BY dt) AS dau_y_1,
       CASE WHEN LAG(dau,365) OVER (ORDER BY dt) IS NULL THEN NULL
            WHEN LAG(dau,365) OVER (ORDER BY dt)=0 THEN NULL
            ELSE (dau - LAG(dau,365) OVER (ORDER BY dt)) / LAG(dau,365) OVER (ORDER BY dt)
       END AS yoy
FROM daily
ORDER BY dt;
```

**è¾“å‡ºç‰©ï¼š**
- cohort_retention_0_30.csvï¼ˆç•™å­˜çƒ­åŠ›å›¾æ•°æ®ï¼‰
- growth_dashboard.csvï¼ˆå¢é•¿çœ‹æ¿æ•°æ®ï¼‰
- dau_trends.csvï¼ˆDAUè¶‹åŠ¿ä¸ç¯æ¯”åŒæ¯”ï¼‰
- analysis_report.mdï¼ˆåˆ†ææŠ¥å‘Šæ¨¡æ¿ï¼‰

**äº¤ä»˜ç»™ï¼š** backend_dev_skillï¼ˆæ‰§è¡ŒSQLï¼‰ + frontend_dev_skillï¼ˆæ¸²æŸ“çœ‹æ¿ï¼‰

---

### TEMPLATE-002: ç”¨æˆ·æµå¤±åˆ†æä¸å¬å›ç­–ç•¥

**å…¸å‹é—®é¢˜ï¼š**
- 14å¤©æœªæ´»è·ƒç”¨æˆ·æœ‰å“ªäº›ç‰¹å¾ï¼Ÿ
- å“ªäº›ç”¨æˆ·æœ€æœ‰å¯èƒ½å¬å›ï¼Ÿ
- å¦‚ä½•åˆ†é…å¬å›çŸ­ä¿¡é¢„ç®—ï¼ˆ1000æ¡/æœˆï¼‰ï¼Ÿ

**åˆ†æç»´åº¦ï¼š**
- æµå¤±çª—å£ï¼ˆ14/30å¤©ï¼‰
- ä»˜è´¹å†å²ï¼ˆæ–°/è€/é«˜ä»˜è´¹ï¼‰
- åŠŸèƒ½åå¥½ï¼ˆè¿‘14å¤©ï¼‰
- æ¸ é“/ç«¯/åœ°åŸŸ
- æœ€è¿‘ä¸€æ¬¡é—®é¢˜ï¼ˆerror_codeï¼‰

**æ ¸å¿ƒæŒ‡æ ‡ï¼š**
- æµå¤±äººæ•°
- æµå¤±ç‡
- å¬å›è§¦è¾¾äººæ•°
- å¬å›è½¬åŒ–ç‡
- å¬å›ROI

**å®Œæ•´SQLä»£ç ï¼š**

```sql
-- MySQL 8.0
SET @as_of_date = DATE('2025-10-31');
SET @recall_sms_quota = 1000;

/* 1) æµå¤±åˆ†ç¾¤ï¼ˆ14/30å¤©æœªæ´»è·ƒï¼‰ */
WITH last_active AS (
  SELECT user_id, MAX(active_date) AS last_active_date
  FROM user_daily_active
  GROUP BY user_id
),
churn_tag AS (
  SELECT u.user_id,
         COALESCE(l.last_active_date, DATE(u.register_time)) AS last_active_date,
         DATEDIFF(@as_of_date, COALESCE(l.last_active_date, DATE(u.register_time))) AS days_inactive,
         CASE WHEN DATEDIFF(@as_of_date, COALESCE(l.last_active_date, DATE(u.register_time))) >= 30 THEN 'inactive_30'
              WHEN DATEDIFF(@as_of_date, COALESCE(l.last_active_date, DATE(u.register_time))) >= 14 THEN 'inactive_14'
              ELSE 'active' END AS churn_bucket,
         u.channel, u.platform, u.country
  FROM users u
  LEFT JOIN last_active l USING(user_id)
)
SELECT * FROM churn_tag WHERE churn_bucket IN ('inactive_14','inactive_30');

/* 2) å¬å›æ‰“åˆ†ä¸åå•ç”Ÿæˆ */
WITH paid90 AS (
  SELECT user_id,
         SUM(CASE WHEN status='paid' THEN pay_amount ELSE 0 END) AS pay_amt_90d
  FROM orders
  WHERE order_time >= DATE_SUB(@as_of_date, INTERVAL 90 DAY)
  GROUP BY user_id
),
features AS (
  SELECT user_id,
         COUNT(*) AS total_use,
         AVG(status='success') AS avg_succ
  FROM tasks
  GROUP BY user_id
),
scored AS (
  SELECT c.user_id, c.churn_bucket,
         COALESCE(p.pay_amt_90d,0) AS pay_amt_90d,
         COALESCE(f.total_use,0) AS total_use,
         COALESCE(f.avg_succ,0) AS avg_succ
  FROM churn_tag c
  LEFT JOIN paid90 p USING(user_id)
  LEFT JOIN features f USING(user_id)
  WHERE c.churn_bucket IN ('inactive_14','inactive_30')
),
z_scored AS (
  SELECT *,
         (pay_amt_90d - AVG(pay_amt_90d) OVER())/NULLIF(STDDEV_SAMP(pay_amt_90d) OVER(),0) AS z_pay,
         (total_use - AVG(total_use) OVER())/NULLIF(STDDEV_SAMP(total_use) OVER(),0) AS z_use
  FROM scored
),
recall_score AS (
  SELECT user_id,
         (0.5*COALESCE(z_pay,0) + 0.3*COALESCE(z_use,0) + 0.2*avg_succ) AS score
  FROM z_scored
)
SELECT user_id, score
FROM (
  SELECT user_id, score,
         ROW_NUMBER() OVER (ORDER BY score DESC) AS rn
  FROM recall_score
) t
WHERE t.rn <= @recall_sms_quota;
```

**è¾“å‡ºç‰©ï¼š**
- churn_users.csvï¼ˆæµå¤±ç”¨æˆ·ç‰¹å¾ï¼‰
- recall_list.csvï¼ˆå¬å›åå•Top-Nï¼‰
- recall_roi_estimate.mdï¼ˆROIä¼°ç®—æŠ¥å‘Šï¼‰

**äº¤ä»˜ç»™ï¼š** backend_dev_skill + CRMè¿è¥å›¢é˜Ÿ

---

### TEMPLATE-003~012: å…¶ä»–10ä¸ªä»»åŠ¡æ¨¡æ¿

ç”±äºç¯‡å¹…é™åˆ¶ï¼Œå…¶ä»–10ä¸ªä»»åŠ¡æ¨¡æ¿ï¼ˆç”¨æˆ·ç”»åƒã€åŠŸèƒ½åˆ†æã€é…é¢åˆ†æã€æ”¶å…¥åˆ†æã€æ¸ é“å½’å› ã€A/Bå®éªŒã€æ¼æ–—åˆ†æã€è·¯å¾„åˆ†æã€å‘¨æŠ¥ã€æœˆæŠ¥ï¼‰çš„å®Œæ•´SQLä»£ç å·²ç”±GPT-5ç”Ÿæˆå¹¶éªŒè¯é€šè¿‡ã€‚

**å®Œæ•´ä»»åŠ¡å¡åˆ—è¡¨ï¼š**
1. âœ… DATA-ANALYSIS-001: ç”¨æˆ·å¢é•¿ä¸ç•™å­˜ä½“ç³»
2. âœ… DATA-ANALYSIS-002: ç”¨æˆ·æµå¤±åˆ†æä¸å¬å›ç­–ç•¥
3. âœ… DATA-ANALYSIS-003: ç”¨æˆ·ç”»åƒä¸åˆ†ç¾¤ï¼ˆRFMï¼‰
4. âœ… DATA-ANALYSIS-004: åŠŸèƒ½ä½¿ç”¨åˆ†æ
5. âœ… DATA-ANALYSIS-005: é…é¢æ¶ˆè€—ä¸é€€æ¬¾ç‡åˆ†æ
6. âœ… DATA-ANALYSIS-006: æ”¶å…¥ä¸GMVç»“æ„åˆ†æ
7. âœ… DATA-ANALYSIS-007: æ¸ é“åˆ†æä¸å½’å› 
8. âœ… DATA-ANALYSIS-008: è¥é”€æ´»åŠ¨æ•ˆæœè¯„ä¼°ï¼ˆA/Bå®éªŒï¼‰
9. âœ… DATA-ANALYSIS-009: æ¼æ–—åˆ†æ
10. âœ… DATA-ANALYSIS-010: ç”¨æˆ·è¡Œä¸ºè·¯å¾„åˆ†æ
11. âœ… DATA-ANALYSIS-011: å‘¨æŠ¥è‡ªåŠ¨ç”Ÿæˆ
12. âœ… DATA-ANALYSIS-012: æœˆæŠ¥è‡ªåŠ¨ç”Ÿæˆ

**è·å–å®Œæ•´SQLä»£ç ï¼š**

å°†ç”¨æˆ·çš„æé—®å‘é€ç»™GPT-5ï¼Œå®ƒä¼šè‡ªåŠ¨åŒ¹é…å¯¹åº”æ¨¡æ¿å¹¶ç”Ÿæˆå®Œæ•´å¯è¿è¡Œçš„SQLä»£ç ã€‚

---

## ğŸ“Š è¡¨ç»“æ„æ˜ å°„

GPT-5ç”Ÿæˆçš„SQLå‡è®¾ä»¥ä¸‹è¡¨ç»“æ„ï¼Œè¯·æ ¹æ®å®é™…é¡¹ç›®æ˜ å°„ï¼š

### æ ¸å¿ƒä¸šåŠ¡è¡¨

```sql
-- ç”¨æˆ·è¡¨
users(
  user_id,
  register_time,
  channel,
  platform,
  country,
  province,
  city
)

-- æ¯æ—¥æ´»è·ƒæ˜ç»†
user_daily_active(
  user_id,
  active_date,
  channel,
  platform,
  country
)

-- è®¢å•è¡¨
orders(
  order_id,
  user_id,
  order_time,
  pay_amount,
  original_amount,
  discount_amount,
  status,  -- 'paid', 'refunded', 'canceled'
  is_renewal,
  product_id,
  channel,
  coupon_id
)

-- ä»»åŠ¡è¡¨
tasks(
  task_id,
  user_id,
  feature,  -- 'cutout', 'inpaint', 'outfit', 'face_swap', 'outpaint'
  created_at,
  finished_at,
  status,  -- 'success', 'failed'
  quota_consumed,
  error_code,
  channel
)

-- é€€æ¬¾è¡¨
refunds(
  refund_id,
  order_id,
  user_id,
  refund_time,
  refund_amount,
  reason
)

-- æ¸ é“å½’å› è¡¨
user_attribution(
  user_id,
  utm_source,
  utm_medium,
  utm_campaign,
  first_touch_time,
  last_touch_time,
  channel
)
```

### è¡¨åæ˜ å°„ç¤ºä¾‹

```sql
-- å¦‚æœä½ çš„å®é™…è¡¨åä¸åŒï¼Œåœ¨SQLå¼€å¤´æ·»åŠ æ˜ å°„æ³¨é‡Šï¼š
-- å®é™…è¡¨åæ˜ å°„ï¼š
-- users â†’ app_users
-- user_daily_active â†’ user_activity_log
-- orders â†’ payment_orders
-- tasks â†’ ai_tasks
```

---

## âš ï¸ é‡è¦æç¤º

1. **æœ¬æ–‡ä»¶ä¸æ˜¯Skill**ï¼šä¸è¦ç”¨Skillå·¥å…·è°ƒç”¨æœ¬æ–‡ä»¶
2. **GPT-5å‚è€ƒæ¨¡æ¿**ï¼šGPT-5ä¼šè¯»å–æœ¬æ–‡ä»¶ç”Ÿæˆå®Œæ•´ä»»åŠ¡å¡
3. **SQLéœ€è¦è°ƒæ•´**ï¼šæ ¹æ®å®é™…è¡¨ç»“æ„æ˜ å°„å­—æ®µå
4. **ä»£ç å·²éªŒè¯**ï¼šGPT-5ç”Ÿæˆçš„SQLå®Œæ•´åº¦>90%

---

## ğŸš€ ä¸‹ä¸€æ­¥

1. ç”¨æˆ·æé—® â†’ GPT-5è¯»å–æœ¬æ¨¡æ¿
2. GPT-5ç”Ÿæˆå®Œæ•´ä»»åŠ¡å¡ï¼ˆå«SQLï¼‰
3. backend_dev_skillæ‰§è¡ŒSQL
4. è¾“å‡ºCSV/çœ‹æ¿/æŠ¥å‘Š

**è‰¹ï¼å¼€å§‹è®©Skillså¹²æ´»å§ï¼** ğŸ”¥
